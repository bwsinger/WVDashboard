CREATE TABLE "buildings" (
	"id" SERIAL PRIMARY KEY,
	"name" TEXT NOT NULL,
	"number" SMALLINT NOT NULL,
	"street" TEXT NOT NULL,

	"has_ev" BOOLEAN NOT NULL,
	"has_lab" BOOLEAN NOT NULL,

	"export" TEXT NOT NULL,
	"hvac" TEXT DEFAULT '[]',
	"kitchen" TEXT DEFAULT '[]',
	"plugs" TEXT DEFAULT '[]',
	"lights" TEXT DEFAULT '[]',
	"solar" TEXT DEFAULT '[]',
	"ev" TEXT DEFAULT '[]',
	"lab" TEXT DEFAULT '[]'
);

CREATE TABLE "hobodata" (
	"id" SERIAL PRIMARY KEY,
	"building" INTEGER REFERENCES "buildings" ("id"),
	"datetime" TIMESTAMP NOT NULL,
	"hvac" numeric(8,2),
	"kitchen" numeric(8,2),
	"plugs" numeric(8,2),
	"lights" numeric(8,2),
	"solar" numeric(8,2),
	"ev" numeric(8,2),
	"lab" numeric(8,2)
);

CREATE TABLE "seasons" (
	"id" SERIAL PRIMARY KEY,
	"name" TEXT NOT NULL
);

CREATE TABLE "goals" (
	"id" SERIAL PRIMARY KEY,
	"building" INTEGER REFERENCES "buildings" ("id"),
	"season" INTEGER REFERENCES "seasons" ("id"),
	"hour" INTEGER NOT NULL,
	"hvac_weekday" numeric(13,8),
	"hvac_weekend" numeric(13,8),
	"kitchen_weekday" numeric(13,8),
	"kitchen_weekend" numeric(13,8),
	"lights_weekday" numeric(13,8),
	"lights_weekend" numeric(13,8),
	"plugs_weekday" numeric(13,8),
	"plugs_weekend" numeric(13,8)
);

CREATE TABLE "trophies" (
	"id" SERIAL PRIMARY KEY,
	"building" INTEGER REFERENCES "buildings" ("id"),
	"year" INTEGER NOT NULL,
	"isoweek" INTEGER NOT NULL
);

INSERT INTO "buildings"
("id", "name", "number", "street", "has_ev", "has_lab", "export", "hvac", "kitchen", "plugs", "lights", "solar", "ev", "lab")
VALUES
(1, '215 Sage', 215, 'Sage', FALSE, TRUE, '215_Last_30_Days', '[6,11,19,20,21,23]', '[15,16,17]', '[5,7,8,9,10,12,26,27,28]', '[4,22,24,25]', '[1,14,18]', '[]', '[]'),
(2, '1590 Tilia', 1590, 'Tilia', TRUE, FALSE, '1590_Last_30_Days', '[22,23,24,25]', '[2,3,4,5,6,7]', '[10,11,12,13,14,26,27,28,29,30,31]', '[8,9]', '[15,16,32]', '[18,19,20,21]', '[]'),
(3, '1605 Tilia', 1605, 'Tilia', TRUE, FALSE, '1605_Last_30_Days', '[16,19,20,22,24,27]', '[1,4,5,6,9,13]', '[2,7,10,18,21,23,25,26,28,29]', '[12,14,15]', '[3,11,30]', '[8,17]', '[]'),
(4, '1715 Tilia', 1715, 'Tilia', FALSE, FALSE, '1715_Last_30_Days', '[6,19,20,21,22,23,24,25]', '[4,9,11,12,13,15,26]', '[5,7,10,17,18,27,28,29,30]', '[1,3,14]', '[2,8,16]', '[]', '[]');

INSERT INTO "seasons" ("id", "name")
VALUES
(1, 'spring'),
(2, 'summer'),
(3, 'fall'),
(4, 'winter');

INSERT INTO "goals"
("id", "building", "season", "hour", "hvac_weekday", "hvac_weekend", "kitchen_weekday", "kitchen_weekend", "lights_weekday", "lights_weekend", "plugs_weekday", "plugs_weekend")
VALUES
(1, 1, 1, 0, 2813.08016667, 3241.40900000, 18.53401667, 11.43163333, 615.08500000, 332.12333333, 3640.66765000, 3266.11870000),
(2, 1, 1, 1, 3733.28833333, 2664.89000000, 16.30930000, 13.62790000, 347.67333333, 299.54866667, 3410.98303333, 3244.36276667),
(3, 1, 1, 2, 3189.12166667, 3186.90200000, 13.73416667, 11.51940000, 255.09200000, 273.31533333, 3331.09583333, 3186.79160000),
(4, 1, 1, 3, 4142.06200000, 3260.23766667, 11.41213333, 12.18500000, 252.24133333, 246.62400000, 3333.43020000, 3163.00166667),
(5, 1, 1, 4, 3108.81433333, 3475.32533333, 11.76980000, 9.41660000, 242.20300000, 246.27333333, 3328.15003333, 3174.49240000),
(6, 1, 1, 5, 4377.79016667, 3785.22166667, 11.54726667, 13.62726667, 250.04083333, 246.41366667, 3313.95156667, 3162.39106667),
(7, 1, 1, 6, 4086.52516667, 3360.70800000, 13.34840000, 10.64770000, 336.42566667, 246.22366667, 3507.62710000, 3183.65496667),
(8, 1, 1, 7, 8211.66883333, 4240.22666667, 24.95090000, 9.94976667, 1020.13550000, 246.48566667, 4372.83676667, 3434.60623333),
(9, 1, 1, 8, 8406.47316667, 3821.27333333, 91.24691667, 10.16143333, 1226.23033333, 246.26533333, 2699.49558333, 2385.12990000),
(10, 1, 1, 9, 6851.86416667, 3399.06300000, 183.58966667, 18.92870000, 2038.26366667, 261.34200000, 4074.78933333, 2341.53630000),
(11, 1, 1, 10, 5338.83666667, 3214.95633333, 181.29950000, 11.76740000, 2682.18050000, 274.78800000, 5792.11550000, 2727.08860000),
(12, 1, 1, 11, 4376.30166667, 2043.48800000, 182.73403333, 10.32926667, 2730.19833333, 294.54433333, 6388.64780000, 2594.20040000),
(13, 1, 1, 12, 3689.65916667, 2603.82666667, 221.19425000, 9.56960000, 2632.02333333, 296.63100000, 5762.41658333, 3040.65873333),
(14, 1, 1, 13, 3310.53866667, 2467.07866667, 224.75181667, 15.85796667, 2831.32833333, 331.17100000, 6267.80085000, 2701.10670000),
(15, 1, 1, 14, 2797.70083333, 2328.32066667, 208.03435000, 16.88213333, 3061.01200000, 320.50633333, 4929.92681667, 2853.57020000),
(16, 1, 1, 15, 2852.44450000, 927.94600000, 172.78611667, 13.23003333, 3000.96800000, 298.04133333, 4171.79088333, 2709.70563333),
(17, 1, 1, 16, 3096.82783333, 2093.80533333, 101.52398333, 11.14513333, 2753.43566667, 318.37633333, 6721.50101667, 2791.39120000),
(18, 1, 1, 17, 1679.27033333, 1406.91266667, 21.16603333, 12.76080000, 2160.08133333, 349.78033333, 6332.11063333, 3624.63686667),
(19, 1, 1, 18, 1677.91183333, 1766.29066667, 14.04510000, 11.74650000, 1415.93783333, 341.51500000, 4824.61756667, 3399.89116667),
(20, 1, 1, 19, 1943.80050000, 2078.23200000, 12.17166667, 15.54226667, 1183.29266667, 282.74366667, 4546.30750000, 3257.70873333),
(21, 1, 1, 20, 2957.33983333, 2038.96066667, 11.72291667, 11.59023333, 755.38350000, 239.00000000, 3676.28191667, 3190.19376667),
(22, 1, 1, 21, 2258.10116667, 2586.38033333, 10.73768333, 14.21593333, 706.70250000, 264.16033333, 3590.32148333, 3222.20706667),
(23, 1, 1, 22, 3097.66983333, 2045.73033333, 10.90695000, 8.78110000, 768.03816667, 238.56133333, 3618.03038333, 3162.51456667),
(24, 1, 1, 23, 2894.63583333, 2558.45700000, 40.06645000, 12.55296667, 1322.29250000, 259.19633333, 4511.20238333, 3203.67836667);