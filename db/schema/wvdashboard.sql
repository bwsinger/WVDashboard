CREATE TABLE "buildings" (
	"id" SERIAL PRIMARY KEY,
	"name" TEXT NOT NULL,
	"number" SMALLINT NOT NULL,
	"street" TEXT NOT NULL,

	"has_ev" BOOLEAN NOT NULL,
	"has_lab" BOOLEAN NOT NULL,

	"export" TEXT NOT NULL,
	"hvac" TEXT DEFAULT '[]',
	"kitchen" TEXT DEFAULT '[]',
	"plugs" TEXT DEFAULT '[]',
	"lights" TEXT DEFAULT '[]',
	"solar" TEXT DEFAULT '[]',
	"ev" TEXT DEFAULT '[]',
	"lab" TEXT DEFAULT '[]'
);

CREATE TABLE "hobodata" (
	"id" SERIAL PRIMARY KEY,
	"building" INTEGER REFERENCES "buildings" ("id"),
	"datetime" TIMESTAMP NOT NULL,
	"hvac" numeric(8,2),
	"kitchen" numeric(8,2),
	"plugs" numeric(8,2),
	"lights" numeric(8,2),
	"solar" numeric(8,2),
	"ev" numeric(8,2),
	"lab" numeric(8,2)
);

CREATE TABLE "seasons" (
	"id" SERIAL PRIMARY KEY,
	"name" TEXT NOT NULL
);

CREATE TABLE "goals" (
	"id" SERIAL PRIMARY KEY,
	"building" INTEGER REFERENCES "buildings" ("id"),
	"season" INTEGER REFERENCES "seasons" ("id"),
	"hour" INTEGER NOT NULL,
	"hvac_weekday" numeric(13,8),
	"hvac_weekend" numeric(13,8),
	"kitchen_weekday" numeric(13,8),
	"kitchen_weekend" numeric(13,8),
	"lights_weekday" numeric(13,8),
	"lights_weekend" numeric(13,8),
	"plugs_weekday" numeric(13,8),
	"plugs_weekend" numeric(13,8)
);

CREATE TABLE "trophies" (
	"id" SERIAL PRIMARY KEY,
	"building" INTEGER REFERENCES "buildings" ("id"),
	"year" INTEGER NOT NULL,
	"isoweek" INTEGER NOT NULL
);

INSERT INTO "buildings"
("id", "name", "number", "street", "has_ev", "has_lab", "export", "hvac", "kitchen", "plugs", "lights", "solar", "ev", "lab")
VALUES
(1, '215 Sage', 215, 'Sage', FALSE, TRUE, '215_Last_30_Days', '[6,11,19,20,21,23]', '[15,16,17]', '[5,7,8,9,10,12,26,27,28]', '[4,22,24,25]', '[1,14,18]', '[]', '[]'),
(2, '1590 Tilia', 1590, 'Tilia', TRUE, FALSE, '1590_Last_30_Days', '[22,23,24,25]', '[2,3,4,5,6,7]', '[10,11,12,13,14,26,27,28,29,30,31]', '[8,9]', '[15,16,32]', '[18,19,20,21]', '[]'),
(3, '1605 Tilia', 1605, 'Tilia', TRUE, FALSE, '1605_Last_30_Days', '[16,19,20,22,24,27]', '[1,4,5,6,9,13]', '[2,7,10,18,21,23,25,26,28,29]', '[12,14,15]', '[3,11,30]', '[8,17]', '[]'),
(4, '1715 Tilia', 1715, 'Tilia', FALSE, FALSE, '1715_Last_30_Days', '[6,19,20,21,22,23,24,25]', '[4,9,11,12,13,15,26]', '[5,7,10,17,18,27,28,29,30]', '[1,3,14]', '[2,8,16]', '[]', '[]');

INSERT INTO "seasons" ("id", "name")
VALUES
(1, 'spring'),
(2, 'summer'),
(3, 'fall'),
(4, 'winter');

INSERT INTO "goals"
("building", "season", "hour", "hvac_weekday", "hvac_weekend", "kitchen_weekday", "kitchen_weekend", "lights_weekday", "lights_weekend", "plugs_weekday", "plugs_weekend")
VALUES

-- 215 SPRING
(1,1,0,1135.721108,1303.34952,11.30154946,11.55161695,275.232636,199.4020377,2619.252206,2591.626063),
(1,1,1,1058.802415,1114.716596,11.11804754,10.52787277,181.1521195,192.7695544,2575.330111,2594.971185),
(1,1,2,1251.487038,1542.066206,11.37318484,13.37438967,184.0198934,195.1255357,2580.76342,2596.199529),
(1,1,3,1475.560725,1085.470897,10.29905752,11.66120161,184.64189,186.6021226,2577.885654,2609.906068),
(1,1,4,1269.944751,1541.260127,10.25626957,10.9507528,180.0548367,193.5140251,2577.272736,2627.564706),
(1,1,5,1778.59898,1537.776445,10.22000293,11.22709954,174.8533201,198.5598998,2576.178543,2624.619487),
(1,1,6,2123.116584,1576.566859,11.21345484,9.692930478,208.6354791,202.3013338,2640.523416,2738.072144),
(1,1,7,1850.352758,1580.7672,17.34699219,9.974483981,554.8881894,203.5286432,2921.781428,2359.515406),
(1,1,8,3595.521364,1067.818016,51.21767197,10.86673305,996.4839763,232.0407055,2424.267642,1860.000183),
(1,1,9,3631.055523,1256.910171,134.8623662,11.15611287,2187.832151,240.0950244,3533.723579,2369.687763),
(1,1,10,3060.42627,949.3509683,113.4308793,10.05232677,2475.444223,229.0747887,3874.725616,2458.357082),
(1,1,11,2398.340849,980.3252494,124.3708048,9.312852654,2576.200359,221.1588858,3994.938768,2565.45593),
(1,1,12,2292.154076,695.9544328,161.0147568,12.28384687,2426.095409,222.3144,3456.989187,2689.345228),
(1,1,13,2564.161903,1524.188238,134.5993988,10.60311217,2444.972328,192.8269582,3783.849729,2886.643554),
(1,1,14,2651.685278,1726.435564,115.383982,10.68950893,2492.064482,207.1513888,3802.359445,2858.832255),
(1,1,15,2608.811728,847.6653948,115.2838568,10.84859021,2363.556144,193.3988941,3610.005057,2353.748556),
(1,1,16,2719.777704,1356.350366,57.9207568,11.75818978,2219.242871,224.055918,3359.556964,2490.727084),
(1,1,17,2361.78505,1256.735534,35.85788147,11.19259258,1804.12595,221.8131274,2669.558646,2054.263335),
(1,1,18,1392.780272,1168.7934,33.51979182,10.24892264,897.6514102,218.6074083,2917.144828,2139.285945),
(1,1,19,1207.691022,942.8724242,12.89586029,11.8494699,633.847404,225.8766695,3211.193642,2886.425129),
(1,1,20,900.988026,891.2675417,12.92456219,11.23191822,381.1517608,191.0901295,2797.727586,2605.604633),
(1,1,21,1214.494342,1204.053076,12.30433437,12.97527966,612.0961346,195.644757,2884.660649,2604.819671),
(1,1,22,985.3094356,990.736196,22.40986879,11.43328428,903.4662526,223.3230899,2964.694844,2622.78546),
(1,1,23,1090.9777,1448.064819,27.0724155,10.73473665,697.5325522,207.2016778,2812.985434,2597.806076),

-- 1590 SPRING
(2,1,0,497.4737726,255.2091634,76.54358422,59.42461471,473.4620145,793.7752567,811.4049256,836.7798334),
(2,1,1,443.0506926,255.0969914,58.39359543,67.08485824,322.8468206,202.9578289,795.6665779,756.4242323),
(2,1,2,461.1659065,248.0805844,59.00376636,62.94385382,224.0651943,210.7634909,802.0678706,755.5408534),
(2,1,3,477.4059065,248.0301559,63.72927141,55.58604163,203.4234441,206.729909,796.4790216,755.8317322),
(2,1,4,487.1839582,244.8696437,72.50989548,65.34179208,202.9722253,202.857391,797.3579189,755.9613237),
(2,1,5,472.6514771,241.7538326,65.91042545,76.34777832,202.4597396,202.8326656,797.7314629,755.5868257),
(2,1,6,504.9420229,244.6723997,66.31996703,61.62377247,202.3625803,202.7580705,796.9082252,763.3779738),
(2,1,7,919.8965198,337.0008455,60.58145463,66.68729723,222.7908166,215.5352009,817.7605639,788.4844545),
(2,1,8,3434.366517,1214.389776,55.20042011,58.7066022,489.0646284,383.610753,843.4321881,787.3383165),
(2,1,9,2883.644254,1531.016528,310.3715793,55.12939127,1050.978026,382.2130033,934.8770314,790.8252451),
(2,1,10,2439.44772,2110.726554,211.3754164,68.7330741,1572.596777,404.8716061,1177.505154,797.9042058),
(2,1,11,1490.012426,1610.224063,201.5997515,73.36104186,1715.549653,387.0355609,1271.319975,806.9819792),
(2,1,12,1471.63417,1373.24222,239.0238485,56.44025301,1665.945046,378.7022854,1260.172314,810.3606052),
(2,1,13,1360.310102,1237.048658,266.9995853,69.17924763,1697.461325,375.7021386,1254.146177,812.4811169),
(2,1,14,1231.614393,1341.355201,286.5009586,59.83544638,1708.205391,383.5404883,1276.116284,813.46478),
(2,1,15,1329.109665,1313.806989,220.7812321,64.21532266,1698.170467,385.6260772,1273.383527,817.6045552),
(2,1,16,1170.921941,1370.685034,191.410749,76.76475639,1658.028051,377.2859568,1253.838382,830.8535761),
(2,1,17,1152.804558,1284.915367,143.3007681,67.90791849,1573.151918,370.7345816,1158.924965,834.846927),
(2,1,18,887.9507687,918.9459297,80.8246701,61.09238733,1232.729827,380.0283735,964.2298469,818.4066198),
(2,1,19,761.2517349,550.1009502,66.7799823,63.1683375,636.3319472,372.2647585,866.3476024,804.4322945),
(2,1,20,815.8688787,586.7261535,67.04742101,56.08026892,524.7507784,364.0337369,833.9463452,777.7516622),
(2,1,21,746.1562902,545.6886656,60.26192346,61.40208261,443.4071557,395.7261663,804.5639394,773.8428385),
(2,1,22,437.4212503,264.6627619,79.84375885,76.2833807,294.051335,251.9617633,801.9953544,771.5490399),
(2,1,23,383.4287354,262.3986478,71.31833819,63.56561912,447.1134412,204.1193608,806.3606609,771.4010791),

-- 1605 SPRING
(3,1,0,347.0261629,425.3453113,169.64509,134.7097172,732.4488054,697.4262816,951.2876661,932.483983),
(3,1,1,359.2144979,556.4215295,156.7453226,121.1651486,582.8975675,635.7165793,936.4502152,913.7316527),
(3,1,2,377.533984,663.2329237,133.0484749,141.7655748,531.7608449,593.1528288,910.2695712,900.6823577),
(3,1,3,538.1659479,905.957738,133.8816051,116.7529146,510.6012141,586.9439965,920.5630014,910.2273457),
(3,1,4,883.9873542,1173.559527,123.6969128,114.0933939,501.4542731,591.1621066,906.8530737,900.5218192),
(3,1,5,937.1465801,1342.281017,116.5979737,119.6087983,492.1507579,583.3810269,906.2801979,900.0699828),
(3,1,6,1707.587997,2548.208421,115.0391868,112.5081601,504.1436388,560.631579,913.9332577,907.3130233),
(3,1,7,7192.527589,4320.780544,150.2212612,171.1067292,1135.51364,575.0959415,942.7471072,903.790804),
(3,1,8,9383.539182,2725.705567,482.4632885,121.7291604,2928.863152,579.6772223,1446.259181,910.0374759),
(3,1,9,7660.567305,2342.800636,492.903283,127.1581382,4042.912865,614.347046,2126.158725,939.2527968),
(3,1,10,5600.681572,2597.595841,348.136406,149.2645366,4262.911807,643.0912748,2355.121798,935.5671283),
(3,1,11,4815.786343,2358.060974,396.4955715,166.9143681,4282.591991,765.7243319,2444.225423,980.3811047),
(3,1,12,4942.768888,1782.38893,547.7594308,156.8208175,4382.226963,807.9943216,2499.892784,971.4684189),
(3,1,13,4889.615352,1487.427752,585.1310138,174.5993933,4437.386354,861.6455284,2408.467944,968.1871194),
(3,1,14,4938.16523,1468.042896,451.3857525,154.7232935,4446.333626,839.9549181,2399.785141,975.2702931),
(3,1,15,4715.755527,1366.821018,329.1535813,171.2869712,4383.548184,1015.804138,2236.96306,1000.756508),
(3,1,16,3367.577914,862.3615704,319.8081496,137.0472653,4265.504473,955.1790225,2019.025596,1037.710143),
(3,1,17,2476.468038,819.3990486,264.2733335,173.4646525,3945.598004,822.8343934,1715.149369,1053.050415),
(3,1,18,2414.34181,690.4803605,214.3162162,150.6816191,3289.787157,709.1532051,1375.176633,1042.093494),
(3,1,19,2351.341755,815.6679277,195.4522702,159.3614457,2209.908116,739.7721744,1273.086683,1046.262345),
(3,1,20,634.5194815,551.3331082,204.5486685,131.0824874,1657.130945,833.2485732,1160.712529,1012.96751),
(3,1,21,199.9968309,393.7528115,176.3337465,139.4159359,784.442517,794.1228544,1020.779377,1006.598811),
(3,1,22,171.1494947,417.6298353,184.0964661,124.5353376,665.3005566,683.729235,968.8665533,944.2010548),
(3,1,23,251.9244319,522.9267491,164.805425,140.2557964,641.1282046,683.5527993,954.614115,924.3274179);
